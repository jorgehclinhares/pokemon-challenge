<div class="header shadow">
  <app-header></app-header>
</div>
<div class="container">
  <div class="list">
    @for (pokemon of pokemons; track pokemon.order) {
      <div class="card" [appPokemonTypeClass]="pokemon.types[0].type.name">
        <div class="card-body">
          <div class="info">
            <span class="number">Nº{{ pokemon.order | numberPokedex: 3 }}</span>
            <h4>{{ pokemon.name }}</h4>
            <div class="comments" (click)="openModalComment(pokemon)">
              <span class="text-bg-light message">
                <i
                  class="bi"
                  [ngClass]="{
                    'bi-chat-fill': pokemon.comment.message !== '',
                    'bi-chat': pokemon.comment.message === ''
                  }"
                ></i>
                {{ pokemon.comment.message || 'Nenhum comentário adicionado' }}
              </span>
              <i class="bi bi-chevron-right"></i>
            </div>
            <span class="like">
              <app-like
                [liked]="pokemon.liked"
                (onLike)="onLike($event, pokemon)"
              ></app-like>
            </span>
          </div>

          <div class="box">
            <img src="{{ pokemon.sprites?.front_default }}" />
          </div>
        </div>
      </div>
    }
  </div>
</div>
@if (pokemons.length > 0 && searchMode === false) {
  <div class="pagination shadow">
    <app-pagination
      [configuration]="paginationConfiguration"
      (onPageChange)="onPageChange($event)"
    ></app-pagination>
  </div>
} @else if (pokemons.length === 0 && searchMode === true) {
  <div class="not-found">
    <img src="assets/images/margikarp-not-found.png" />
    <h2>Não foi possível encontrar o Pokémon</h2>
  </div>
}

@if (showCommentModal && commentModalPokemon) {
  <app-comment
    [pokemon]="commentModalPokemon"
    (onAddComment)="addComent($event)"
    (onDeleteComment)="deleteComment($event)"
    (onModalClose)="closeCommentModal()"
  ></app-comment>
}
